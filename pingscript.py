#This Script outputs the IP online and how many are online/offline
import argparse
import subprocess

parser = argparse.ArgumentParser()
parser.add_argument('-net')
args = parser.parse_args()

ok = 0
nok = 0

if args == "":
    print(f"Usage: ./pingscript.py -net [network]")
    print(f"Example: ./pingscript.py -net 192.168.20")
else:
    network = args.net
    for i in range(254):
        address = network + '.' + str(i)
        res = subprocess.Popen(['ping', '-c', '1', '-b', address],stdout = subprocess.PIPE).communicate()[0]
        if (b'Unreachable' in res):
            nok += 1
            continue
        else:
            print(f"{address} OK")
            ok += 1

print(f"{ok} hosts online")
print(f"{nok} hosts offline")